<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard - SingerStream</title>
</head>
<link rel="stylesheet" href="css/admin.css">
<body>

<header>ðŸŽ¤ SingerStream Admin Dashboard</header>

<div class="container">
  <!-- Upload Section -->
  <div class="upload-box">
    <h3>Upload New Content</h3>

    <input type="text" id="title" placeholder="Title">
    
    <select id="type">
      <option value="song">Song</option>
      <option value="podcast">Podcast</option>
      <option value="video">Video</option>
    </select>

    <textarea id="description" placeholder="Description"></textarea>

    <input type="file" id="file">

    <button onclick="upload()">Upload</button>
  </div>

  <!-- Content List -->
  <div class="list-box">
    <h3>Uploaded Content</h3>
    <div id="contentList">Loading...</div>
  </div>
</div>

<script>
// const API_BASE = "http://localhost:3000/api";
// const token = localStorage.getItem("token");

// // Load content list
// function loadContent() {
//   fetch(API_BASE + "/content")
//     .then(res => res.json())
//     .then(data => {
//       const list = document.getElementById("contentList");
//       list.innerHTML = "";

//       if (data.length === 0) {
//         list.innerHTML = "<p>No content uploaded yet.</p>";
//         return;
//       }

//       data.forEach(item => {
//         const div = document.createElement("div");
//         div.className = "item";
//         div.innerHTML = `
//           <span>${item.title} (${item.type})</span>
//           <button class="delete" onclick="remove(${item.id})">Delete</button>
//         `;
//         list.appendChild(div);
//       });
//     });
// }

// Upload content
function upload() {
  const fd = new FormData();
  fd.append("title", document.getElementById("title").value);
  fd.append("type", document.getElementById("type").value);
  fd.append("description", document.getElementById("description").value);
  fd.append("file", document.getElementById("file").files[0]);

  fetch(API_BASE + "/content", {
    method: "POST",
    headers: {
      "Authorization": token
    },
    body: fd
  })
  .then(res => res.json())
  .then(data => {
    alert(data.msg || "Uploaded");
    loadContent();
  })
  .catch(err => console.log("Upload error:", err));
}

// Delete content
function remove(id) {
  if (!confirm("Delete this content?")) return;

  fetch(API_BASE + "/content/" + id, {
    method: "DELETE",
    headers: {
      "Authorization": token
    }
  })
  .then(res => res.json())
  .then(data => {
    alert(data.msg || "Deleted");
    loadContent();
  });
}

// Initial load
loadContent();
</script>

</body>
</html>
